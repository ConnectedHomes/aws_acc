Chalice Workshop


echo '{"description": "My next Todo", "metadata": {}}' | \
     http POST localhost:8000/todos Authorization:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkZWJzNCIsImlhdCI6MTU5ODI4MTEwMCwibmJmIjoxNTk4MjgxMTAwLCJqdGkiOiJiOTM5ZTU5NC0yMWVlLTQxNmUtOGJkZi1mYjliZDZlZDU4MmUifQ.JicFSD4k4dOVb6z4Ytkes14XHF4veKCN3EQ-iDdXdV8


echo '{"state": "started"}' | \
    http PUT localhost:8000/todos/0ce02de3-c9fa-416a-ac6b-ddadd8ae3b7c \
Authorization:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkZWJzNCIsImlhdCI6MTU5ODI4MTEwMCwibmJmIjoxNTk4MjgxMTAwLCJqdGkiOiJiOTM5ZTU5NC0yMWVlLTQxNmUtOGJkZi1mYjliZDZlZDU4MmUifQ.JicFSD4k4dOVb6z4Ytkes14XHF4veKCN3EQ-iDdXdV8


http localhost:8000/todos/0ce02de3-c9fa-416a-ac6b-ddadd8ae3b7c \
Authorization:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkZWJzNCIsImlhdCI6MTU5ODI4MTEwMCwibmJmIjoxNTk4MjgxMTAwLCJqdGkiOiJiOTM5ZTU5NC0yMWVlLTQxNmUtOGJkZi1mYjliZDZlZDU4MmUifQ.JicFSD4k4dOVb6z4Ytkes14XHF4veKCN3EQ-iDdXdV8

http DELETE localhost:8000/todos/0ce02de3-c9fa-416a-ac6b-ddadd8ae3b7c \
Authorization:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkZWJzNCIsImlhdCI6MTU5ODI4MTEwMCwibmJmIjoxNTk4MjgxMTAwLCJqdGkiOiJiOTM5ZTU5NC0yMWVlLTQxNmUtOGJkZi1mYjliZDZlZDU4MmUifQ.JicFSD4k4dOVb6z4Ytkes14XHF4veKCN3EQ-iDdXdV8

——————

Create a new todo and pass in your auth token

echo '{"description": "a todo", "metadata": {}}' | \
     http POST localhost:8000/todos Authorization:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkZWJzNCIsImlhdCI6MTU5ODI4MTEwMCwibmJmIjoxNTk4MjgxMTAwLCJqdGkiOiJiOTM5ZTU5NC0yMWVlLTQxNmUtOGJkZi1mYjliZDZlZDU4MmUifQ.JicFSD4k4dOVb6z4Ytkes14XHF4veKCN3EQ-iDdXdV8

List your todos using the get_todos route:

http localhost:8000/todos Authorization:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkZWJzNCIsImlhdCI6MTU5ODI4MTEwMCwibmJmIjoxNTk4MjgxMTAwLCJqdGkiOiJiOTM5ZTU5NC0yMWVlLTQxNmUtOGJkZi1mYjliZDZlZDU4MmUifQ.JicFSD4k4dOVb6z4Ytkes14XHF4veKCN3EQ-iDdXdV8

———————


Do this as a new user:

echo '{"username": "debs5", "password": "ThatTherePassword"}' |     http POST localhost:8000/login
HTTP/1.1 200 OK
Content-Length: 219
Content-Type: application/json
Date: Tue, 25 Aug 2020 09:10:17 GMT
Server: BaseHTTP/0.6 Python/3.8.3

{
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkZWJzNSIsImlhdCI6MTU5ODM0NjYxNywibmJmIjoxNTk4MzQ2NjE3LCJqdGkiOiJhYzAzOTViYi02ZjMxLTQyNTItOWI0ZC1mODY0ZTBkZDc4MjYifQ.U1VbODqkCpKI8tj8HVDlGFJ8RuJityDY6zCfJ_yPG50"
}

Create a new todo and pass in your auth token

echo '{"description": "another todo", "metadata": {}}' | \
     http POST localhost:8000/todos Authorization:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkZWJzNSIsImlhdCI6MTU5ODM0NjYxNywibmJmIjoxNTk4MzQ2NjE3LCJqdGkiOiJhYzAzOTViYi02ZjMxLTQyNTItOWI0ZC1mODY0ZTBkZDc4MjYifQ.U1VbODqkCpKI8tj8HVDlGFJ8RuJityDY6zCfJ_yPG50

List your todos using the get_todos route:

http localhost:8000/todos Authorization:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkZWJzNSIsImlhdCI6MTU5ODM0NjYxNywibmJmIjoxNTk4MzQ2NjE3LCJqdGkiOiJhYzAzOTViYi02ZjMxLTQyNTItOWI0ZC1mODY0ZTBkZDc4MjYifQ.U1VbODqkCpKI8tj8HVDlGFJ8RuJityDY6zCfJ_yPG50


—————————————————————————

chalice deploy your app to AWS


(chalice-env) CMM-C02Q111CFVH8/mytodo $ chalice deploy
Creating deployment package.
Updating policy for IAM role: mytodo-dev-api_handler
Updating lambda function: mytodo-dev
Creating IAM role: mytodo-dev-jwt_auth
Creating lambda function: mytodo-dev-jwt_auth
Updating rest API
Resources deployed:
  - Lambda ARN: arn:aws:lambda:eu-west-1:627886280200:function:mytodo-dev
  - Lambda ARN: arn:aws:lambda:eu-west-1:627886280200:function:mytodo-dev-jwt_auth
  - Rest API URL: https://f4two4euea.execute-api.eu-west-1.amazonaws.com/api/


http https://f4two4euea.execute-api.eu-west-1.amazonaws.com/todos Authorization:eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkZWJzNCIsImlhdCI6MTU5ODI4MTEwMCwibmJmIjoxNTk4MjgxMTAwLCJqdGkiOiJiOTM5ZTU5NC0yMWVlLTQxNmUtOGJkZi1mYjliZDZlZDU4MmUifQ.JicFSD4k4dOVb6z4Ytkes14XHF4veKCN3EQ-iDdXdV8



curl -v -d '{"username -v : "debs5", "password": "ThatTherePassword"}' -H 'Contenn' https://f4two4euea.execute-api.eu-west-1.amazonaws.com/login


ID
38e7f8e2u3
Name
MyTodos
API key
1OXa18VIAb7tesMeBgUOO4lMfcuNooOs45YZFOFB
Description
API Key for my Todos
Enabled
Enabled 


curl -v -X POST -H "x-api-key: MyTodos" -H "Content-Type: application/json" -H 'x-apigw-api-id:f4two4euea' -d '{"username -v : "debs5", "password": "ThatTherePassword"}' https://f4two4euea.execute-api.eu-west-1.amazonaws.com/login


 curl -v -X POST -H "x-api-key: MyTodos" -H "Content-Type: appigw-api-id:{f4two4euea}' -d '{"username: "debs5", "password": "ThatTherePassword"}' https://f4two4euea.execute-api.eu-west-1.amazonaws.com/login

CMM-C02Q111CFVH8/aws-account-automation $ curl -d username=debs5 -d password=ThatTherePassword  https://hrwjium854.execute-api.eu-west-1.amazonaws.com/api/login
{"token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkZWJzNSIsImlhdCI6MTU5OTA0MjM4MiwibmJmIjoxNTk5MDQyMzgyLCJqdGkiOiIyMDc1N2MwMi0zODNmLTQyOGUtOTY1NC1lNzA0MTVhOTgyMTgifQ.IADsDW0WF8YvwjMu2cBjqRRDAE7VsXcuWb_O8DkIuTY"}CMM-C02Q111CFVH8/aws-account-automation $


CMM-C02Q111CFVH8/aws-account-automation $ curl -d username=debs5 -d password=ThatTherePassword  https://f4two4euea.execute-api.eu-west-1.amazonaws.com/login

Capex and platform availability for timesheets
Even BAU Stuff t
